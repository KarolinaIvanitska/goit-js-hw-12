{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-function.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport const lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst imageEl = document.querySelector('.gallery');\n\nexport function imageTemplate({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return ` \n  <li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${webformatURL}\"\n      alt=\"${tags}\"\n      width=\"360\"\n      height = \"220\"\n    />\n  </a>\n  <p class=\"large-image\"> largeImageURL: \"${largeImageURL}\"</p>\n  <div class =\"container-images\">  \n  <p class=\"tags\"> <span class=\"text\">tags</span> \"${tags}\"</p>\n      <p class = \"likes\"><span class=\"text\"> likes</span> \"${likes}\"</p>\n      <p class=\"likes\"> <span class=\"text\">views</span>\"${views}\"</p>\n      <p class=\"likes\"> <span class=\"text\">comments</span>\"${comments}\"</p>\n      <p class=\"likes\"> <span class=\"text\">downloads</span>\"${downloads}\"</p>\n      </div>\n</li>`;\n}\n\nexport function imagesTemplate(arr) {\n  return arr.map(imageTemplate).join('');\n}\n\nexport function renderMarkup(image, arr) {\n  imageEl.insertAdjacentHTML('beforeend', imagesTemplate(arr));\n}\n\nexport function refreshLightBox() {\n  lightbox.refresh();\n}\n","import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '42814531-6217cd85928bc5270423ce53d';\n\nlet page = 1;\nlet perPage = 15;\nlet totalHits = 0;\nconst lastPage = Math.ceil(totalHits / perPage);\n\nexport async function getPhotos(q, page, perPage) {\n  const params = {\n    key: API_KEY,\n    q,\n    _page: page,\n    _limit: perPage,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  };\n  const res = await axios.get(`${BASE_URL}/`, { params });\n  return res.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\nimport { renderMarkup, refreshLightBox } from './js/render-function';\nimport { getPhotos } from './js/pixabay-api';\n\nconst formElem = document.querySelector('.search-form');\nconst loader = document.querySelector('.loader');\nconst imageEl = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nhideLoadMoreBtn();\n\nformElem.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  imageEl.innerHTML = '';\n  page = 1;\n  showLoadMoreBtn();\n\n  const userSearch = e.target.elements.search.value.trim();\n\n  if (userSearch === '') {\n    iziToast.warning({\n      titleColor: '#fff',\n      messageColor: '#fff',\n      backgroundColor: '#ffa000',\n      message: 'Please enter a search query',\n      position: 'topRight',\n    });\n    return;\n  }\n  showLoader();\n  try {\n    const data = await getPhotos(userSearch, page);\n    if (data.hits.length === 0) {\n      return iziToast.error({\n        title: 'Error',\n        titleColor: '#fff',\n        messageColor: '#fff',\n        backgroundColor: '#ef4040',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n    }\n    renderMarkup(imageEl, data.hits);\n    refreshLightBox();\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n  }\n  e.target.reset();\n});\n\n//=========LOADER=============================\n\nfunction showLoader() {\n  if (loader) {\n    loader.style.display = 'block';\n  }\n}\n\nfunction hideLoader() {\n  if (loader) {\n    loader.style.display = 'none';\n  }\n}\n\n//============BTN-LOAD-MORE==================\n\nfunction hideLoadMoreBtn() {\n  if (loadMoreBtn) {\n    loadMoreBtn.style.display = 'none';\n  }\n}\n\nfunction showLoadMoreBtn() {\n  if (loadMoreBtn) {\n    loadMoreBtn.style.display = 'block';\n  }\n}\n\n//========================================\nlet page = 1;\nlet perPage = 15;\nlet totalHits = 0;\nconst lastPage = Math.ceil(totalHits / perPage);\n//========================================\n\nloadMoreBtn.addEventListener('click', async e => {\n  page += 1;\n  const data = await getPhotos(page);\n  renderMarkup(imageEl, data.hits);\n  const lastPage = Math.ceil(totalHits / perPage);\n\n  if (lastPage === page) {\n    showLoadMoreBtn();\n    iziToast.error({\n      title: 'Error',\n      titleColor: '#fff',\n      messageColor: '#fff',\n      backgroundColor: '#ef4040',\n      message: 'We are sorry, but you have reached the end of search results',\n      position: 'topRight',\n    });\n  }\n});\n"],"names":["lightbox","SimpleLightbox","imageEl","imageTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imagesTemplate","arr","renderMarkup","image","refreshLightBox","BASE_URL","API_KEY","getPhotos","q","page","perPage","params","axios","formElem","loader","loadMoreBtn","hideLoadMoreBtn","e","showLoadMoreBtn","userSearch","iziToast","showLoader","data","error","hideLoader","totalHits"],"mappings":"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"}