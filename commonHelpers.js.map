{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-function.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport const lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst imageEl = document.querySelector('.gallery');\n\nexport function imageTemplate({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return ` \n  <li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${webformatURL}\"\n      alt=\"${tags}\"\n      width=\"360\"\n      height = \"220\"\n    />\n  </a>\n  <p class=\"large-image\"> largeImageURL: \"${largeImageURL}\"</p>\n  <div class =\"container-images\">  \n  <p class=\"tags\"> <span class=\"text\">tags</span> \"${tags}\"</p>\n      <p class = \"likes\"><span class=\"text\"> likes</span> \"${likes}\"</p>\n      <p class=\"likes\"> <span class=\"text\">views</span>\"${views}\"</p>\n      <p class=\"likes\"> <span class=\"text\">comments</span>\"${comments}\"</p>\n      <p class=\"likes\"> <span class=\"text\">downloads</span>\"${downloads}\"</p>\n      </div>\n</li>`;\n}\n\nexport function imagesTemplate(arr) {\n  return arr.map(imageTemplate).join('');\n}\n\nexport function renderMarkup(imageEl, arr) {\n  imageEl.insertAdjacentHTML('beforeend', imagesTemplate(arr));\n  lightbox.refresh();\n}\n","import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '42814531-6217cd85928bc5270423ce53d';\n\nlet perPage = 15;\n\nexport async function getPhotos(q, page) {\n  const params = {\n    key: API_KEY,\n    q,\n    page,\n    _limit: perPage,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  };\n  const res = await axios.get(`${BASE_URL}/`, { params });\n  return res.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\nimport { renderMarkup } from './js/render-function';\nimport { getPhotos } from './js/pixabay-api';\n\nconst formElem = document.querySelector('.search-form');\nconst loader = document.querySelector('.loader');\nconst imageEl = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nhideLoadMoreBtn();\n\nlet page = 1;\nconst perPage = 15;\nlet userSearch;\n\n//=========Form-Input===========================\n\nformElem.addEventListener('submit', async e => {\n  e.preventDefault();\n  imageEl.innerHTML = '';\n\n  page = 1;\n\n  userSearch = e.target.elements.search.value.trim();\n\n  if (userSearch === '') {\n    hideLoader();\n    iziToast.warning({\n      titleColor: '#fff',\n      messageColor: '#fff',\n      backgroundColor: '#ffa000',\n      message: 'Please enter a search query',\n      position: 'topRight',\n    });\n    return;\n  }\n  showLoader();\n  try {\n    const data = await getPhotos(userSearch, page);\n    if (data.hits.length === 0) {\n      hideLoader();\n      iziToast.error({\n        title: 'Error',\n        titleColor: '#fff',\n        messageColor: '#fff',\n        backgroundColor: '#ef4040',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    if (data.totalHits < perPage) {\n      hideLoadMoreBtn();\n    } else {\n      showLoadMoreBtn();\n    }\n\n    renderMarkup(imageEl, data.hits);\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      titleColor: '#fff',\n      messageColor: '#fff',\n      backgroundColor: '#ef4040',\n      message: 'Error',\n      position: 'topRight',\n    });\n  }\n\n  hideLoader();\n  e.target.reset();\n});\n\n//=========LOADER=============================\nfunction showLoader() {\n  if (loader) {\n    loader.style.display = 'block';\n  }\n}\n\nfunction hideLoader() {\n  if (loader) {\n    loader.style.display = 'none';\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', hideLoader);\n//============BTN-LOAD-MORE==================\n\nfunction hideLoadMoreBtn() {\n  if (loadMoreBtn) {\n    loadMoreBtn.style.display = 'none';\n  }\n}\n\nfunction showLoadMoreBtn() {\n  if (loadMoreBtn) {\n    loadMoreBtn.style.display = 'block';\n  }\n}\n\n//========================================\n\nloadMoreBtn.addEventListener('click', async e => {\n  showLoader();\n  page += 1;\n  const data = await getPhotos(userSearch, page);\n  const lastPage = Math.ceil(data.totalHits / perPage);\n\n  renderMarkup(imageEl, data.hits);\n  scrollBtn();\n\n  if (page === lastPage) {\n    hideLoadMoreBtn();\n    iziToast.error({\n      title: 'Error',\n      titleColor: '#fff',\n      messageColor: '#fff',\n      backgroundColor: '#ef4040',\n      message: 'We are sorry, but you have reached the end of search results',\n      position: 'topRight',\n    });\n  }\n  hideLoader();\n});\n\n//=========FUNCTION-SCROLL=======================\nfunction scrollBtn() {\n  const cardHeight = document\n    .querySelector('.gallery-item')\n    .getBoundingClientRect().height;\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["lightbox","SimpleLightbox","imageTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imagesTemplate","arr","renderMarkup","imageEl","BASE_URL","API_KEY","perPage","getPhotos","q","page","params","axios","formElem","loader","loadMoreBtn","hideLoadMoreBtn","userSearch","e","hideLoader","iziToast","showLoader","data","showLoadMoreBtn","lastPage","scrollBtn","cardHeight"],"mappings":"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"}